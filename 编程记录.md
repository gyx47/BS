stitch + curser
数据库，windows没装mysql,其实我在wsl启动一个也行。但是试试用docker。
报错

```
 BS  docker exec -it mysql
"docker exec" requires at least 2 arguments.
See 'docker exec --help'.

Usage:  docker exec [OPTIONS] CONTAINER COMMAND [ARG...]

Execute a command in a running container

What's next?
  Try Docker Debug for seamless, persistent debugging tools in any container or image → docker debug mysql
  Learn more at https://docs.docker.com/go/debug-cli/
 BS  docker exec -it mysql mysql -u root -p
Error response from daemon: container 273e8c9f90b3137688f3d05b168407f9038422039f3a2ea06bb3e2e39ea56a85 is not running

What's next?
  Try Docker Debug for seamless, persistent debugging tools in any container or image → docker debug mysql
  Learn more at https://docs.docker.com/go/debug-cli/
```

用log查看失败原因
原来必须要设置密码

```docker
 BS  docker logs mysql
2025-10-08 07:35:01+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.43-1.el9 started.
2025-10-08 07:35:01+00:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql'
2025-10-08 07:35:01+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.43-1.el9 started.
2025-10-08 07:35:02+00:00 [ERROR] [Entrypoint]: Database is uninitialized and password option is not specified
    You need to specify one of the following as an environment variable:
    - MYSQL_ROOT_PASSWORD
    - MYSQL_ALLOW_EMPTY_PASSWORD
    - MYSQL_RANDOM_ROOT_PASSWORD
 BS  docker rm mysql
mysql
 BS  docker run -d --name mysql -e MYSQL_ROOT_PASSWORD=mysql  -p 3306:3306  mysql:8.0
```

接下来遇到
`数据库连接失败: failed to find libmagic.  Check your installation`
缺依赖
`❌ 数据库连接失败: (pymysql.err.OperationalError) (1698, "Access denied for user 'root'@'localhost'")
(Background on this error at: https://sqlalche.me/e/20/e3q8)`配置文件明明没有问题，灵异
破案了，是import server的app组件密码写死了没有改，没有读取.env。进python一步步调报错比较多
`IndentationError: unexpected indent`python要注意缩进

还是不对，就算ip写了127.0.0.1但是还是会被识别成localhost，而且其他路由都是错的。检查了一下，明明docker的端口和主机的端口3306都是打开的。想不出哪里出问题了

```
BS  docker port mysql 3306/tcp -> 0.0.0.0:3306
BS  Test-NetConnection -ComputerName 127.0.0.1 -Port 3306 ComputerName : 127.0.0.1 RemoteAddress : 127.0.0.1 RemotePort : 3306 InterfaceAlias : Loopback Pseudo-Interface 1 SourceAddress : 127.0.0.1 TcpTestSucceeded : True
```

我已经被docker搞得完全没有耐心了

重新建容器密码错误，因为\`截断,\`只是行连接符，不是换行符，所以不要自作聪明把空格省掉

重新开始了，正视**经典的 Docker + MySQL 用户匹配陷阱**
在容器里 `localhost` 能连，是因为存在 `'photo_user'@'localhost'`但我的 Flask 程序**其实是从宿主机来的连接**，MySQL 把它识别成 `photo_user@172.17.0.1`（容器桥接网卡的 IP） 或 `photo_user@%`。
我首先把所有@%的权限都通过了，然而没有用。然后我加了个防止把127.0.0.1识别成localhost，从而不卡在宿主机而是能去找主机的数据库。写了conf，也确保这个防止转写功能是打开着的，然而没有用。

依然没解决这个问题，去ubuntu开了个新数据库
我觉得我一开始就不该在powershell搞的，ubuntu多好